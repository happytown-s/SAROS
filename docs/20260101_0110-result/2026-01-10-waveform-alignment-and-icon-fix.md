# 波形アラインメント根本修正

## 概要
マルチプライヤー(x2等)導入後に発生していた「波形開始位置のズレ」問題を根本解決。

### Waveform Alignment & Visualization Fixes (2026-01-10)

### 概要
波形の描画開始位置の不整合、x2倍速録音時の位相ズレ、およびアプリアイコンの設定を行いました。

### 変更点

1.  **録音開始位置の表示修正**
    *   `LooperAudio.cpp`: `recordStartSample` の計算で、以前は `masterStartSample` からの差分を反転させていましたが、`writePosition`（ループ内の絶対位置）をそのまま使用するように修正しました。これにより、録音を開始した時点の角度（例：ループの50%時点で録音開始したら6時の位置）から正しく波形が描画されるようになりました。

2.  **x2倍速録音時の位相ズレ修正**
    *   `LooperAudio.cpp`: x2トラックの `recordStartSample` を `masterLoopLength` で剰余演算（modulo）することで、マスターループ1周内での相対位置に正規化しました。
    *   `CircularVisualizer.h`: `startAngleRatio` の計算式から `maxMultiplier` を除外しました。これにより、倍速トラックであっても「マスターループのどの位置から始まったか」が正しく角度に反映されるようになりました。

3.  **アプリアイコン設定**
    *   四隅を透過処理したアイコン画像を `Source/Assets/icon.png` に配置。
    *   `CMakeLists.txt` に `ICON_BIG` / `ICON_SMALL` 設定を追加し、アプリビルド時にアイコンが適用されるようにしました。

### 検証結果
*   **波形表示**: 任意の位置から録音を開始しても、その時点に対応する角度から波形が描画されることを確認。
*   **x2位相**: x2倍速トラック録音時、波形が半周ずれる問題が解消され、マスターループと同期した正しい位置に表示されることを確認。
*   **アイコン**: ビルド後のアプリ（DockおよびFinder）にて、透過アイコンが正しく表示されることを確認。
