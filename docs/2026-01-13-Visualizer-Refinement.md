# ヴィジュアライザ・レンダリングの刷新と最適化 (2026-01-13)

## 概要
ヴィジュアライザの視覚効果をよりダイナミックかつ高品質にするため、従来の線画ベースの描画から「リボン状（面）」のレンダリング方式に変更しました。また、音量や周波数成分（特に低音）に応じた物理アニメーションのチューニングを行いました。

## 変更内容

### 1. リボン状レンダリング（Jittered Ribbon）
- 中心線の廃止: これまでの中心にある「背骨」のような線を廃止し、波形の外形全体を一つの「塗りつぶされたリボン」として描画するようにしました。
- エッジのビリビリ感（Jitter）: 全体の輪郭に対してジッターを適用することで、オーガニックな「震え」を表現しました。

### 2. 物理アニメーションのチューニング
- **バウンス効果（Pump）**: トラックのRMS（音量）に連動して、波形が大きく伸縮（パンプ）する効果を強化しました。これにより、ビート感に合わせた躍動感が向上しました。
- **低音連動ジッター**: ジッター効果を低音域（Bass Level）に強く反応するように調整しました。キックやベースの音に合わせて、リボンの縁がビリビリと震える視覚効果を実現しました。

### 3. プレイヘッドとハイライトの改良
- **プレイヘッドの延長**: プレイヘッドのラインを中心に近い位置から外周の先まで伸ばし、レーダーのような視認性の高いスタイルに変更。先端の白丸を廃止し、よりシャープなデザインにしました。
- **ラジアル・ビーム・ハイライト**: 現在の再生位置をリボン上でハイライトする際、同心円状の円弧ではなく、リボンを横切る放射状の「ビーム」として描画するように変更しました。これにより、波形の太さに関わらず正確な位置が把握しやすくなりました。

### 4. 座標系とアングルの統一
- 波形の開始位置を12時方向（-90度）に統一し、プレイヘッドの開始位置もそれに合わせることで、楽曲の拍（1拍目）と視覚的な開始位置を完全に一致させました。

## 技術的詳細
- `CircularVisualizer.h` において、`juce::Path` の生成ロジックをリサイズ・トランスフォームの後に一括で行うことで、高いフレームレートを維持したまま複雑な形状の描画を可能にしました。
- パフォーマンス向上のため、セグメントごとの `strokePath` 呼び出しを最小限に抑え、一つのパスとして結合して描画しています。
